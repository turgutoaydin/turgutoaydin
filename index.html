<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETG Kategoriler ve TR Otobüs İstasyonları</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0; /* Açık gri arka plan */
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        h1, h2 {
            color: #FF6600; /* Turuncu başlık */
            text-align: center;
            margin: 10px 0;
        }
        section {
            width: 100%;
            max-width: 400px; /* Mobil için dar genişlik */
            margin: 20px 0;
            padding: 20px;
            background-color: #e0e0e0; /* Gri bölüm arka planı */
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .category-item, .station-item {
            background-color: white;
            margin: 10px 0;
            padding: 15px;
            border-left: 4px solid #FF6600; /* Turuncu kenar */
            border-radius: 5px;
        }
        .subcategory, .type, .variant {
            margin-left: 20px;
            font-size: 0.9em;
            color: #666;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
        .loading {
            text-align: center;
            color: #FF6600;
        }
        .error {
            color: #FF0000;
            text-align: center;
        }
        .note {
            font-size: 0.8em;
            color: #666;
            text-align: center;
            margin: 10px 0;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>ETG Kategoriler ve TR Otobüs İstasyonları</h1>
    
    <p class="note">Not: Bu sayfayı çalıştırmak için dosyaları bir yerel sunucu üzerinden açın (örneğin, VS Code Live Server eklentisi veya terminalde 'python -m http.server 8000' komutu ile). File:// protokolü fetch'i engeller.</p>
    
    <section id="categories-section">
        <h2>Kategoriler (etg-categories.json)</h2>
        <div id="categories-content" class="loading">Yükleniyor...</div>
    </section>
    
    <section id="stations-section">
        <h2>Otobüs İstasyonları (tr-busstations.json)</h2>
        <div id="stations-content" class="loading">Yükleniyor...</div>
    </section>

    <script>
        // ETG Kategoriler yükleme
        fetch('etg-categories.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Dosya bulunamadı: ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const content = document.getElementById('categories-content');
                content.innerHTML = '';
                
                if (data.categories) {
                    data.categories.forEach(cat => {
                        const catDiv = document.createElement('div');
                        catDiv.className = 'category-item';
                        let typesHtml = '';
                        if (cat.types && cat.types.length > 0) {
                            typesHtml = '<h4>Türler:</h4><ul>' + cat.types.map(type => {
                                if (type.variants) {
                                    return `<li>${type.name}<ul>${type.variants.map(varType => `<li class="variant">${varType.name} - ${varType.description}</li>`).join('')}</ul></li>`;
                                }
                                return `<li>${type.name} - ${type.description}</li>`;
                            }).join('') + '</ul>';
                        }
                        let subHtml = '';
                        if (cat.subcategories && cat.subcategories.length > 0) {
                            subHtml = '<h4>Alt Kategoriler:</h4><ul>' + cat.subcategories.map(sub => `<li>${sub.name} - ${sub.description}</li>`).join('') + '</ul>';
                        }
                        catDiv.innerHTML = `
                            <h3>${cat.name}</h3>
                            <p><strong>Açıklama:</strong> ${cat.description}</p>
                            ${subHtml}
                            ${typesHtml}
                        `;
                        content.appendChild(catDiv);
                    });
                } else {
                    content.innerHTML = '<p class="error">Veri yüklenemedi.</p>';
                }
            })
            .catch(error => {
                document.getElementById('categories-content').innerHTML = '<p class="error">Hata: ' + error.message + ' (Yerel sunucu kullanın!)</p>';
            });

        // TR Otobüs İstasyonları yükleme
        fetch('tr-busstations.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Dosya bulunamadı: ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const content = document.getElementById('stations-content');
                content.innerHTML = '';
                
                if (Array.isArray(data)) {
                    data.forEach(station => {
                        const stationDiv = document.createElement('div');
                        stationDiv.className = 'station-item';
                        let phoneHtml = '';
                        if (station.iletisim && station.iletisim.telefon && station.iletisim.telefon.length > 0) {
                            phoneHtml = `<p><strong>Telefon:</strong> ${station.iletisim.telefon.join(', ')}</p>`;
                        }
                        let coordHtml = '';
                        if (station.konum && station.konum.koordinatlar && station.konum.koordinatlar.latitude) {
                            coordHtml = `<p><strong>Koordinatlar:</strong> ${station.konum.koordinatlar.latitude.toFixed(6)}, ${station.konum.koordinatlar.longitude.toFixed(6)}</p>`;
                        }
                        let adresHtml = '';
                        if (station.konum && station.konum.acik_adres) {
                            adresHtml = `<p><strong>Adres:</strong> ${station.konum.acik_adres}</p>`;
                        }
                        stationDiv.innerHTML = `
                            <h3>${station.ad}</h3>
                            <p><strong>ID:</strong> ${station.id}</p>
                            <p><strong>İl:</strong> ${station.konum.il}, <strong>İlçe:</strong> ${station.konum.ilce}</p>
                            ${adresHtml}
                            ${coordHtml}
                            ${phoneHtml}
                        `;
                        content.appendChild(stationDiv);
                    });
                } else {
                    content.innerHTML = '<p class="error">Veri yüklenemedi.</p>';
                }
            })
            .catch(error => {
                document.getElementById('stations-content').innerHTML = '<p class="error">Hata: ' + error.message + ' (Yerel sunucu kullanın!)</p>';
            });
    </script>
</body>
</html>