<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>101 Okey Plus â€¢ Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg: #0a1f3a;
      --table: #001122;
      --card: #1e3a5f;
      --card-light: #2c5282;
      --accent: #f59e0b;
      --text: #e2e8f0;
      --border: #4a5568;
    }

    [data-theme="light"] {
      --bg: #e2e8f0;
      --table: #cbd5e0;
      --card: #edf2f7;
      --card-light: #f7fafc;
      --text: #2d3748;
      --border: #a0aec0;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
      touch-action: manipulation;
    }

    #root {
      height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: rgba(0,0,0,0.4);
      padding: 8px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9rem;
      backdrop-filter: blur(6px);
    }

    .player-info {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #4a5568;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    #table {
      flex: 1;
      background: var(--table);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .opened-area {
      height: 35%;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 12px;
      overflow-x: auto;
      white-space: nowrap;
    }

    .per {
      display: inline-flex;
      gap: 4px;
      background: rgba(255,255,255,0.08);
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      min-width: 140px;
    }

    .my-hand {
      height: 28%;
      background: rgba(0,0,0,0.3);
      padding: 12px;
      overflow-x: auto;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
      border-top: 2px solid var(--accent);
    }

    .tile {
      width: 54px;
      height: 78px;
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4);
      transition: all 0.18s;
      user-select: none;
      position: relative;
      cursor: pointer;
    }

    .tile.selected {
      transform: translateY(-12px) scale(1.12);
      box-shadow: 0 12px 24px rgba(245,158,11,0.5);
      border-color: var(--accent);
      z-index: 10;
    }

    .tile.okey {
      background: linear-gradient(135deg, #f59e0b, #d69e2e);
      color: #1a202c;
    }

    .tile.joker {
      background: linear-gradient(135deg, #9f7aea, #805ad5);
    }

    .tile .num {
      font-size: 2.1rem;
    }

    .tile .color-dot {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      margin-top: 4px;
    }

    .red    { background: #e53e3e; }
    .yellow { background: #f6e05e; }
    .blue   { background: #4299e1; }
    .black  { background: #2d3748; }

    .thrown {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70px;
      height: 100px;
      z-index: 5;
    }

    #status {
      text-align: center;
      padding: 8px;
      background: rgba(0,0,0,0.4);
      font-size: 0.95rem;
    }

    @media (orientation: portrait) {
      body::before {
        content: "LÃ¼tfen telefonu yatay Ã§evirin â€¢ Landscape modu Ã¶nerilir";
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.9);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        text-align: center;
        z-index: 9999;
      }
    }
  </style>
</head>
<body>

<div id="root">
  <header>
    <div class="player-info">
      <div class="avatar">ðŸ§‘</div>
      <span>Sen (Turgut)</span>
    </div>
    <div>101 Okey Plus â€¢ Demo</div>
    <div class="player-info">
      <span>Rakip â€¢ 42</span>
      <div class="avatar">ðŸ¤–</div>
    </div>
  </header>

  <div id="table">
    <div class="opened-area" id="opponent-per">
      <!-- Rakibin aÃ§tÄ±ÄŸÄ± perler -->
    </div>

    <div class="opened-area" id="table-per">
      <!-- Masa perleri / aÃ§Ä±lanlar -->
      <div class="per"></div>
    </div>

    <div class="thrown" id="thrown-tile">?</div>
  </div>

  <div id="my-hand" class="my-hand">
    <!-- Oyuncunun eli buraya gelecek -->
  </div>

  <div id="status">SÄ±ra sende â€¢ TaÅŸ seÃ§ ve at</div>
</div>

<script>
// Telegram Mini App BaÅŸlatma
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

// Tam ekran + yatay kilitleme denemesi (destekleyen cihazlarda)
if (tg.requestFullscreen) tg.requestFullscreen();
if (tg.lockOrientation) tg.lockOrientation('landscape');

// Tema algÄ±lama ve uygulama
function applyTheme() {
  const isDark = tg.colorScheme === 'dark';
  document.documentElement.dataset.theme = isDark ? 'dark' : 'light';
}
applyTheme();
tg.onEvent('themeChanged', applyTheme);

// Basit taÅŸ veri yapÄ±sÄ± (demo iÃ§in)
const colors = ['red', 'yellow', 'blue', 'black'];
const tilesInHand = [
  {num: 10, color: 'red'},
  {num: 11, color: 'red'},
  {num: 12, color: 'red'},
  {num: 7,  color: 'yellow'},
  {num: 8,  color: 'yellow'},
  {num: 9,  color: 'yellow'},
  {num: 5,  color: 'blue'},
  {num: 6,  color: 'blue'},
  {num: 7,  color: 'blue'},
  {num: 1,  color: 'black'},
  {num: 2,  color: 'black'},
  {num: 3,  color: 'black'},
  {num: 14, color: 'black'}, // sahte okey
  {num: 0,  color: 'joker'}, // joker / gerÃ§ek okey
  {num: 13, color: 'red'},
  {num: 1,  color: 'yellow'},
  {num: 4,  color: 'blue'},
  {num: 10, color: 'black'},
  {num: 11, color: 'black'},
  {num: 12, color: 'black'},
  {num: 8,  color: 'red'}
];

let selectedIndex = -1;

// TaÅŸ render fonksiyonu
function createTile(tile, index) {
  const div = document.createElement('div');
  div.classList.add('tile');
  if (tile.color === 'joker') div.classList.add('joker');
  else if (tile.num === 14 || tile.isOkey) div.classList.add('okey');

  if (tile.num === 0 || tile.num === 14) {
    div.innerHTML = `<div class="num">OK</div>`;
  } else {
    div.innerHTML = `<div class="num">${tile.num}</div>`;
  }

  if (tile.color !== 'joker') {
    const dot = document.createElement('div');
    dot.classList.add('color-dot', tile.color);
    div.appendChild(dot);
  }

  div.addEventListener('click', () => {
    if (selectedIndex === index) {
      // Atma simÃ¼lasyonu
      throwTile(index);
    } else {
      // SeÃ§me
      document.querySelectorAll('.tile').forEach(t => t.classList.remove('selected'));
      div.classList.add('selected');
      selectedIndex = index;
      document.getElementById('status').textContent = `SeÃ§ili: ${tile.num || 'OK'} â€¢ Tekrar dokun â†’ at`;
    }
  });

  return div;
}

// TaÅŸ atma (demo efekti)
function throwTile(index) {
  const tileEl = document.querySelectorAll('#my-hand .tile')[index];
  if (!tileEl) return;

  const thrown = document.getElementById('thrown-tile');
  thrown.textContent = tileEl.querySelector('.num').textContent;
  thrown.style.background = tileEl.style.background || '';
  thrown.style.borderColor = tileEl.style.borderColor || '';

  // Efekt
  tileEl.style.transition = 'all 0.6s';
  tileEl.style.transform = 'translateY(-120px) rotate(30deg) scale(0.6)';
  tileEl.style.opacity = '0';

  setTimeout(() => {
    tileEl.remove();
    selectedIndex = -1;
    document.getElementById('status').textContent = 'TaÅŸ atÄ±ldÄ± â€¢ SÄ±ra rakipte';
  }, 600);
}

// Eli render et
function renderHand() {
  const hand = document.getElementById('my-hand');
  hand.innerHTML = '';
  tilesInHand.forEach((tile, i) => {
    hand.appendChild(createTile(tile, i));
  });
}

renderHand();

// BaÅŸlangÄ±Ã§ mesajÄ±
setTimeout(() => {
  document.getElementById('status').textContent = 'SÄ±ra sende â€¢ Bir taÅŸ seÃ§';
}, 1200);

</script>
</body>
</html>