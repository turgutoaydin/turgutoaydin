<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>101 Okey Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(#0a3d0a, #1e6b1e);
            font-family: 'Arial', sans-serif;
            color: white;
            overflow: hidden;
            touch-action: manipulation;
        }
        #game-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        #table {
            flex: 1;
            background: radial-gradient(#2e8b2e, #0a5d0a);
            background-image: url('https://c8.alamy.com/comp/2E01J67/legendary-game-okey-and-game-table-turkish-board-game-okey-rummikub-a-table-with-green-cloth-and-chips-hands-of-the-players-2E01J67.jpg');
            background-size: cover;
            background-position: center;
            position: relative;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }
        #middle-area {
            position: absolute;
            top: 20%;
            left: 10%;
            right: 10%;
            height: 40%;
            border: 4px dashed rgba(255,255,255,0.3);
            border-radius: 20px;
            background: rgba(0,0,0,0.2);
        }
        #hand {
            height: 180px;
            background: rgba(0,0,0,0.4);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 10px;
            flex-wrap: wrap;
            gap: 8px;
            overflow-x: auto;
        }
        .tile {
            width: 60px;
            height: 90px;
            background: linear-gradient(#fff, #eee);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            user-select: none;
            cursor: grab;
            position: relative;
        }
        .tile:active { cursor: grabbing; transform: scale(1.1); }
        .red { color: #d00; }
        .yellow { color: #dd0; }
        .blue { color: #00d; }
        .black { color: #000; }
        .joker {
            background: linear-gradient(45deg, #ff0, #f00);
            color: white;
            font-size: 20px;
        }
        .joker::before {
            content: "â˜…";
            font-size: 40px;
        }
        #controls {
            text-align: center;
            padding: 10px;
            background: rgba(0,0,0,0.6);
        }
        button {
            padding: 12px 24px;
            font-size: 18px;
            background: #d4af37;
            color: #000;
            border: none;
            border-radius: 10px;
            margin: 0 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }
        #total {
            font-size: 24px;
            margin: 10px;
        }
        @media (orientation: landscape) {
            #hand { height: 220px; }
            .tile { width: 70px; height: 110px; font-size: 36px; }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="table">
            <div id="middle-area" class="drop-zone"></div>
        </div>
        <div id="hand"></div>
        <div id="controls">
            <button onclick="newGame()">Yeni Oyun</button>
            <button onclick="calculateTotal()">Per ToplamÄ± Hesapla</button>
            <div id="total"></div>
        </div>
    </div>

    <script>
        const colors = ['red', 'yellow', 'blue', 'black'];
        const colorNames = { red: 'KÄ±rmÄ±zÄ±', yellow: 'SarÄ±', blue: 'Mavi', black: 'Siyah' };

        function createTile(number, color, isJoker = false) {
            const tile = document.createElement('div');
            tile.className = `tile ${color} ${isJoker ? 'joker' : ''}`;
            tile.dataset.number = number;
            tile.dataset.color = color;
            tile.dataset.value = number;
            if (!isJoker) {
                tile.innerHTML = `<span>${number}</span>`;
            } else {
                tile.innerHTML = 'JOKER';
            }
            tile.draggable = true;
            tile.addEventListener('dragstart', dragStart);
            return tile;
        }

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', '');
            e.target.style.opacity = '0.7';
        }

        function dragEnd(e) {
            e.target.style.opacity = '1';
        }

        function newGame() {
            const hand = document.getElementById('hand');
            hand.innerHTML = '';
            document.getElementById('middle-area').innerHTML = '';
            document.getElementById('total').textContent = '';

            // 106 taÅŸ seti (2 set 1-13 + 2 joker)
            const deck = [];
            for (let i = 0; i < 2; i++) {
                for (let c of colors) {
                    for (let n = 1; n <= 13; n++) {
                        deck.push({num: n, col: c});
                    }
                }
            }
            deck.push({num: 0, col: 'joker'}, {num: 0, col: 'joker'});

            // KarÄ±ÅŸtÄ±r
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }

            // 21 taÅŸ daÄŸÄ±t (demo iÃ§in 21)
            for (let i = 0; i < 21; i++) {
                const t = deck.pop();
                const tile = t.col === 'joker' ? createTile(0, '', true) : createTile(t.num, t.col);
                tile.addEventListener('dragend', dragEnd);
                hand.appendChild(tile);
            }

            // Orta alan drop zone
            const middle = document.getElementById('middle-area');
            middle.addEventListener('dragover', e => e.preventDefault());
            middle.addEventListener('drop', e => {
                e.preventDefault();
                const activeTile = document.querySelector('.tile[style*="opacity: 0.7"]');
                if (activeTile && activeTile.parentElement === hand) {
                    middle.appendChild(activeTile);
                }
            });

            // Eli drop zone (geri alma)
            hand.addEventListener('dragover', e => e.preventDefault());
            hand.addEventListener('drop', e => {
                e.preventDefault();
                const activeTile = document.querySelector('.tile[style*="opacity: 0.7"]');
                if (activeTile && activeTile.parentElement === middle) {
                    hand.appendChild(activeTile);
                }
            });
        }

        function calculateTotal() {
            const middle = document.getElementById('middle-area');
            let total = 0;
            middle.querySelectorAll('.tile').forEach(tile => {
                total += parseInt(tile.dataset.value);
            });
            const msg = total >= 101 ? 'AÃ§Ä±labilirsin! ðŸŽ‰' : 'HenÃ¼z deÄŸil...';
            document.getElementById('total').textContent = `Per ToplamÄ±: ${total} - ${msg}`;
        }

        // BaÅŸlat
        newGame();
    </script>
</body>
</html>