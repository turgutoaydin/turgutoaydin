<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>TON Pool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <style>

        *{
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        body{
            background: linear-gradient(#061a2b, #083b5c);
            height: 100vh;
            overflow: hidden;
        }

        .game-container{
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .top-bar{
            color: white;
            padding: 12px 14px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
        }

        .pool-area{
            position: relative;
            flex: 1;
            overflow: hidden;
        }

        /* falling drop */
        #drop{
            position: absolute;
            top: -50px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #8ae8ff, #1d9cff);
            box-shadow: 0 0 12px rgba(0,180,255,0.9);
        }

        /* player collector bucket */
        #collector{
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 32px;
            border-radius: 20px;
            background: linear-gradient(145deg,#ffd34a,#ff8c00);
            box-shadow: 0 0 12px rgba(255,170,0,0.9);
        }

        .footer-info{
            text-align: center;
            color: #cde9ff;
            padding: 8px;
            font-size: 12px;
            opacity: 0.9;
        }

    </style>
</head>

<body>

<div class="game-container">

    <header class="top-bar">
        <div>Balance: <span id="balance">1.000 TON</span></div>
        <div>Reward: <span id="reward">0.001 TON</span></div>
        <div>Level: <span id="level">1</span></div>
    </header>

    <div class="pool-area" id="gameArea">

        <div id="drop"></div>

        <div id="collector"></div>

    </div>

    <footer class="footer-info">
        TON Pool Demo – parmağınızla kovayı hareket ettirin ve damlaları yakalayın
    </footer>

</div>

<script>

const drop = document.getElementById("drop");
const collector = document.getElementById("collector");
const gameArea = document.getElementById("gameArea");

let balance = 1.0;
let reward = 0.001;
let level = 1;

let fallSpeed = 2.2;

let dropX = 100;
let dropY = -50;

function updateUI(){
    document.getElementById("balance").innerText = balance.toFixed(3) + " TON";
    document.getElementById("reward").innerText = reward.toFixed(3) + " TON";
    document.getElementById("level").innerText = level;
}

function resetDrop(){
    dropX = Math.random() * (gameArea.clientWidth - 40);
    dropY = -40;

    // difficulty scaling
    fallSpeed += 0.18;
    reward = parseFloat((reward * 1.12).toFixed(6));
    level++;

    updateUI();
}

function gameLoop(){
    dropY += fallSpeed;
    drop.style.top = dropY + "px";
    drop.style.left = dropX + "px";

    const collectorRect = collector.getBoundingClientRect();
    const dropRect = drop.getBoundingClientRect();

    if(
        dropRect.bottom >= collectorRect.top &&
        dropRect.left < collectorRect.right &&
        dropRect.right > collectorRect.left
    ){
        balance += reward;
        resetDrop();
    }

    if(dropY > gameArea.clientHeight){
        balance -= reward;
        if(balance < 0) balance = 0;
        resetDrop();
    }

    updateUI();
    requestAnimationFrame(gameLoop);
}

// mobile drag movement
let isDragging = false;

gameArea.addEventListener("touchstart", (e)=>{
    isDragging = true;
});

gameArea.addEventListener("touchmove", (e)=>{
    if(!isDragging) return;
    const touch = e.touches[0];
    const areaRect = gameArea.getBoundingClientRect();
    let x = touch.clientX - areaRect.left;

    x = Math.max(0, Math.min(x, gameArea.clientWidth));

    collector.style.left = (x - collector.clientWidth/2) + "px";
});

gameArea.addEventListener("touchend", ()=>{
    isDragging = false;
});

updateUI();
resetDrop();
gameLoop();

</script>

</body>
</html>