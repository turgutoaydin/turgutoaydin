<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Football Pinball – Mini App Demo</title>

<style>
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
        background:#0b1220;
        font-family:Arial, Helvetica, sans-serif;
        display:flex;
        justify-content:center;
        align-items:center;
        height:100vh;
    }

    /* TELEGRAM MINI APP – MOBILE PORTRAIT SAFE AREA */
    #game-container{
        width:100%;
        max-width:480px;
        height:100vh;
        background:#0a8f3c;
        position:relative;
        overflow:hidden;
        border-radius:18px;
        border:3px solid #ffffff20;
    }

    /* FOOTBALL FIELD */
    #field{
        position:absolute;
        inset:0;
        background:linear-gradient(#0fa54a,#0b7d39);
    }

    .center-line{
        width:100%;
        height:2px;
        background:white;
        position:absolute;
        top:50%;
        left:0;
        opacity:0.3;
    }

    .center-circle{
        width:120px;
        height:120px;
        border:2px solid white;
        border-radius:50%;
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%,-50%);
        opacity:0.3;
    }

    /* GOAL */
    #goal{
        position:absolute;
        top:10px;
        left:50%;
        transform:translateX(-50%);
        width:140px;
        height:30px;
        border:3px solid white;
        border-radius:6px;
        background:#ffffff10;
    }

    /* BALL */
    #ball{
        width:28px;
        height:28px;
        border-radius:50%;
        background:white;
        position:absolute;
        bottom:120px;
        left:50%;
        transform:translateX(-50%);
        box-shadow:0 0 6px rgba(0,0,0,0.4);
    }

    /* FLIPPERS */
    .flipper{
        position:absolute;
        width:100px;
        height:18px;
        background:#222;
        border-radius:18px;
        bottom:60px;
        transform-origin:100% 50%;
    }
    #left-flipper{
        left:18%;
        transform-origin:0% 50%;
        background:#222;
    }
    #right-flipper{
        right:18%;
        transform-origin:100% 50%;
        background:#222;
    }

    /* SCOREBOARD */
    #scoreboard{
        position:absolute;
        top:8px;
        right:8px;
        color:white;
        font-weight:bold;
        font-size:16px;
        text-shadow:0 0 4px black;
    }

    /* TOUCH BUTTONS FOR MOBILE */
    #controls{
        position:absolute;
        bottom:10px;
        width:100%;
        display:flex;
        justify-content:space-around;
    }
    .btn{
        width:42%;
        padding:12px 0;
        background:#ffffff20;
        color:white;
        text-align:center;
        border-radius:8px;
        user-select:none;
        border:1px solid #ffffff40;
        backdrop-filter: blur(4px);
    }
</style>
</head>
<body>

<div id="game-container">
    <div id="field">
        <div class="center-line"></div>
        <div class="center-circle"></div>
    </div>

    <div id="goal"></div>

    <div id="ball"></div>

    <div id="left-flipper" class="flipper"></div>
    <div id="right-flipper" class="flipper"></div>

    <div id="scoreboard">SCORE: 0</div>

    <div id="controls">
        <div class="btn" id="left-btn">SOL AYAK</div>
        <div class="btn" id="right-btn">SAĞ AYAK</div>
    </div>
</div>

<script>
/* BASIC PINBALL MECHANICS – FOOTBALL THEME */
const ball = document.getElementById("ball");
const goal = document.getElementById("goal");
const leftFlipper = document.getElementById("left-flipper");
const rightFlipper = document.getElementById("right-flipper");
const scoreEl = document.getElementById("scoreboard");

let score = 0;
let x = 200, y = 500;
let vx = 1.2, vy = -2.2;
const gravity = 0.08;
const friction = 0.995;

/* GAME LOOP */
function loop(){
    vy += gravity;
    x += vx;
    y += vy;

    // walls
    if(x < 10 || x > 440){
        vx *= -1;
    }
    if(y < 10){
        vy *= -1;
    }

    // floor reset
    if(y > 680){
        x = 240;
        y = 520;
        vx = 1.5;
        vy = -2.5;
    }

    // goal detect
    const goalRect = goal.getBoundingClientRect();
    const ballRect = ball.getBoundingClientRect();

    if(
        ballRect.top < goalRect.bottom &&
        ballRect.left > goalRect.left &&
        ballRect.right < goalRect.right
    ){
        score++;
        scoreEl.textContent = "SCORE: " + score;
        vy = 3;
        vx *= -1;
    }

    ball.style.left = x + "px";
    ball.style.top = y + "px";

    requestAnimationFrame(loop);
}
loop();

/* FLIPPERS */
function leftKick(){
    vy = -4.5;
    vx = -2.5;
    leftFlipper.style.transform = "rotate(-25deg)";
    setTimeout(()=>leftFlipper.style.transform="rotate(0deg)",120);
}

function rightKick(){
    vy = -4.5;
    vx = 2.5;
    rightFlipper.style.transform = "rotate(25deg)";
    setTimeout(()=>rightFlipper.style.transform="rotate(0deg)",120);
}

/* TOUCH CONTROLS */
document.getElementById("left-btn").ontouchstart = leftKick;
document.getElementById("right-btn").ontouchstart = rightKick;

/* DESKTOP SUPPORT */
document.addEventListener("keydown",(e)=>{
    if(e.key==="a") leftKick();
    if(e.key==="l") rightKick();
});
</script>

</body>
</html>