<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>My Village 3D Demo</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{
  height:100%;
  overflow:hidden;
  font-family:system-ui,-apple-system,sans-serif;
  background:#0f1c12;
  color:#fff;
}

#ui-top{
  position:absolute;
  top:0;
  width:100%;
  padding:14px;
  display:flex;
  justify-content:space-between;
  background:linear-gradient(to bottom, rgba(0,0,0,.7), transparent);
  z-index:10;
}

.resource{
  background:rgba(30,50,30,.85);
  padding:8px 14px;
  border-radius:30px;
  font-weight:700;
  font-size:.9rem;
  backdrop-filter:blur(10px);
  border:1px solid rgba(120,180,120,.4);
}

#title{
  position:absolute;
  top:60px;
  width:100%;
  text-align:center;
  font-size:1.4rem;
  font-weight:800;
  letter-spacing:2px;
  text-shadow:0 4px 10px #000;
  z-index:10;
}

#build-bar{
  position:absolute;
  bottom:20px;
  width:100%;
  display:flex;
  justify-content:center;
  gap:14px;
  z-index:10;
}

.build-btn{
  width:60px;
  height:60px;
  border-radius:20px;
  background:linear-gradient(145deg,#3a5f3a,#1e2f1e);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  box-shadow:0 8px 20px rgba(0,0,0,.5);
  border:1px solid rgba(150,200,150,.5);
  backdrop-filter:blur(10px);
}

canvas{display:block;}
</style>
</head>
<body>

<div id="ui-top">
  <div class="resource">ğŸŒ² 120</div>
  <div class="resource">ğŸª¨ 85</div>
  <div class="resource">ğŸŒ¾ 40</div>
</div>

<div id="title">ğŸŒ¾ MY VILLAGE 3D</div>

<div id="build-bar">
  <div class="build-btn">ğŸ </div>
  <div class="build-btn">ğŸŒ²</div>
  <div class="build-btn">â›ï¸</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158/build/three.min.js"></script>

<script>
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x0f1c12, 30, 120);

const camera = new THREE.PerspectiveCamera(
  60,
  window.innerWidth/window.innerHeight,
  0.1,
  1000
);

// Ä°zometrik aÃ§Ä±
camera.position.set(25, 30, 25);
camera.lookAt(0,0,0);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

// IÅIK
const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(20,40,20);
light.castShadow=true;
scene.add(light);

scene.add(new THREE.AmbientLight(0x88aa88,.6));

// ZEMÄ°N
const groundGeo = new THREE.PlaneGeometry(100,100,20,20);
const groundMat = new THREE.MeshStandardMaterial({
  color:0x2f6f3f,
  flatShading:true
});
const ground = new THREE.Mesh(groundGeo, groundMat);
ground.rotation.x = -Math.PI/2;
ground.receiveShadow = true;
scene.add(ground);

// AÄAÃ‡ FONKSÄ°YONU
function createTree(x,z){
  const trunk = new THREE.Mesh(
    new THREE.CylinderGeometry(.2,.3,1),
    new THREE.MeshStandardMaterial({color:0x6b3e26})
  );
  trunk.position.set(x,.5,z);

  const leaves = new THREE.Mesh(
    new THREE.ConeGeometry(.9,2,8),
    new THREE.MeshStandardMaterial({color:0x1e7a3f})
  );
  leaves.position.set(x,2,z);

  trunk.castShadow=true;
  leaves.castShadow=true;

  scene.add(trunk);
  scene.add(leaves);
}

// ORMAN
for(let i=0;i<40;i++){
  createTree(
    Math.random()*40-20,
    Math.random()*40-20
  );
}

// EV
function createHouse(x,z){
  const base = new THREE.Mesh(
    new THREE.BoxGeometry(2,1.5,2),
    new THREE.MeshStandardMaterial({color:0xd9b382})
  );
  base.position.set(x,.75,z);

  const roof = new THREE.Mesh(
    new THREE.ConeGeometry(1.8,1.2,4),
    new THREE.MeshStandardMaterial({color:0x8b2e1e})
  );
  roof.position.set(x,2,z);
  roof.rotation.y = Math.PI/4;

  base.castShadow=true;
  roof.castShadow=true;

  scene.add(base);
  scene.add(roof);
}

// KÃ¶y merkezi
createHouse(0,0);
createHouse(4,3);
createHouse(-3,4);

// TAÅ OCAÄI
function createRock(x,z){
  const rock = new THREE.Mesh(
    new THREE.DodecahedronGeometry(1),
    new THREE.MeshStandardMaterial({color:0x888888,flatShading:true})
  );
  rock.position.set(x,1,z);
  rock.castShadow=true;
  scene.add(rock);
}

createRock(8,-6);
createRock(10,-4);
createRock(6,-5);

// Kamera hareket (parmak sÃ¼rÃ¼kleme)
let isDragging=false;
let prevX, prevY;

window.addEventListener("pointerdown", e=>{
  isDragging=true;
  prevX=e.clientX;
  prevY=e.clientY;
});

window.addEventListener("pointermove", e=>{
  if(!isDragging)return;
  const dx=(e.clientX-prevX)*0.05;
  const dy=(e.clientY-prevY)*0.05;
  camera.position.x -= dx;
  camera.position.z -= dy;
  camera.lookAt(0,0,0);
  prevX=e.clientX;
  prevY=e.clientY;
});

window.addEventListener("pointerup", ()=>isDragging=false);

// Render Loop
function animate(){
  requestAnimationFrame(animate);
  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>